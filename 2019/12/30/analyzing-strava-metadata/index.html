<!DOCTYPE html>
<html lang="en">

<head>
    <title>andy reagan</title>
    <meta charset="utf-8" />
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">



<meta name="tags" contents="sweat science" />

    <link rel="stylesheet" type="text/css" href="/theme/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/beemuse.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/base.css">
    <!-- <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/styles/default.min.css"> -->
    <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.2/highlight.min.js"></script> -->
</head>

<body>

    <section id="navbar">
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/index.html">andyreagan.com</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li ><a href="/pages/blog.html">Blog</a></li>
                        <li ><a href="/pages/about-me.html">About</a></li>
                        <li ><a href="/pages/publications.html">Publications</a></li>
                        <li ><a href="/pages/teaching.html">Teaching</a></li>
                        <li ><a href="/pages/visualizations.html">Visualizations</a></li>
                    </ul>
                </div>
                <!--/.nav-collapse -->
            </div>
        </div>
    </section>

<br>
<section class="content">
    <div class="row">

        <div class="col-xs-12 col-md-8  col-md-offset-2 col-lg-6 col-lg-offset-3">
            <div class="paper">
                <header>
                    <h2 class="entry-title">
                        <a href="https://andyreagan.github.io/2019/12/30/analyzing-strava-metadata/" rel="bookmark" title="Permalink to Analyzing Strava metadata">Analyzing Strava metadata</a></h2>
                    
                </header>
                <footer class="post-info">
                    <abbr class="published" title="2019-12-30T00:00:00+01:00">
                        Mon 30 December 2019
                    </abbr>
                    &nbsp;
                    &nbsp;
                    <a href="https://github.com/andyreagan/andyreagan.github.io/edit/main/content/2019-12-30-strava-metadata.md">Edit on Github</a>
                </footer><!-- /.post-info -->
                <br>
                <div class="entry-content">
                    <p>I love running,
and I love stroller running with my son even more.
Strava is my go-to fitness app and I've tagged all of my stroller runs
with a searchable tag so I can count the miles we've logged together,
mostly while he has slept!</p>
<p>The search functionality on Strava's site doesn't provide summaries like total miles,
but I can search my own data easily using Python.</p>
<h2>Request your archive</h2>
<p>Go to your settings:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-01.png" class="img-responsive"></p>
<p>Account page:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-02.png" class="img-responsive"></p>
<p>Click the download button:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-03.png" class="img-responsive"></p>
<p>Click this button:</p>
<p><img src="/images/2019-12-30-strava-metadata/step-04.png" class="img-responsive"></p>
<p>Then you'll get an email with a link to your data.</p>
<h2>Load up your data.</h2>
<p>This part is simple,
and to make things even easier I'll use Pandas.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;activities.csv&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<p>Then we can pull out all of the activies with type Run,
that contain the stroller tag, and sum up the miles all like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">run</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Activity Type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;Run&quot;</span><span class="p">)</span>
<span class="n">stroller</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Activity Name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;#stroller&quot;</span><span class="p">)</span>
<span class="n">miles</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">run</span> <span class="o">&amp;</span> <span class="n">stroller</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># filter</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;Distance&#39;</span><span class="p">]</span>  <span class="c1"># select</span>
    <span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>  <span class="c1"># convert dtype</span>
    <span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="mf">1.609</span>  <span class="c1"># sum and convert to miles</span>
<span class="p">)</span>
<span class="n">miles</span>
</code></pre></div>

<p>Let's break that down: first, we select out two filters (type Run and stroller in the title),
then we convert the distance field to a float,
then we sum it up.
The last step converts km into miles.
I had actually first written it in one line,
as below,
but thought the above would be clearer.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;Activity Type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;Run&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Activity Name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;#stroller&quot;</span><span class="p">),</span> <span class="p">:]</span><span class="o">.</span><span class="n">Distance</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="mf">1.609</span>
</code></pre></div>

<p>All told, by the end of 2019 I'll have logged 857 miles with my little man.</p>
                </div> <!-- /.entry-content -->
            </div> <!-- /.paper -->
        </div> <!-- /.col -->
    </div> <!-- /.row -->
</section><!-- /#content -->

    <footer id="slidingfooter" class="body">
        Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>. Site design by Andy Reagan.
    </footer><!-- /#contentinfo -->
</body>
</script>

</html>